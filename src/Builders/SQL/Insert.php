<?php
//**************************************************************************************
//**************************************************************************************
/**
 * SQL Insert Statement Class
 *
 * @package		phpOpenFW
 * @author 		Christian J. Clark
 * @copyright	Copyright (c) Christian J. Clark
 * @license		https://mit-license.org
 **/
//**************************************************************************************
//**************************************************************************************

namespace phpOpenFW\Builders\SQL;

//**************************************************************************************
/**
 * SQL Insert Class
 */
//**************************************************************************************
class Insert extends Statement
{
    //=========================================================================
    // Traits
    //=========================================================================
    use Traits\Values;

    //=========================================================================
	// Class Memebers
    //=========================================================================
    protected $sql_type = 'insert';

    //=========================================================================
    //=========================================================================
    // Get SQL Method
    //=========================================================================
    //=========================================================================
    public function GetSQL()
    {
        //-------------------------------------------------------
        // Are there values?
        //-------------------------------------------------------
        if (!$this->set_fields) {
	    	trigger_error("No insert values have been specified.");
	    	return '';
	    }

		//----------------------------------------------------------------
        // Format Values
		//----------------------------------------------------------------
        list($fields, $place_holders) = $this->FormatValues();

        //-------------------------------------------------------
        // Are there values?
        //-------------------------------------------------------
        if (empty($fields) || empty($place_holders)) {
	    	trigger_error("No insert values could be found.");
	    	return '';
	    }

		//----------------------------------------------------------------
        // Build Final SQL
		//----------------------------------------------------------------
        return "INSERT INTO {$this->table} ({$fields}\n)\nVALUES ({$place_holders}\n)";        
	}

}
